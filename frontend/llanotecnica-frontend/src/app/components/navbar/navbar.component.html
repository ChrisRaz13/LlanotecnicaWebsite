<nav [class.scrolled]="isScrolled">
  <div class="nav-content">
    <!-- Logo Container - slides in when scrolled -->
    <div class="logo-container" [class.show]="isScrolled">
      <img #logoImg
           src="assets/photos/logo.webp"
           alt="{{ 'NAV.LOGO_ALT' | translate }}"
           class="logo"
           width="180"
           height="40"
           loading="eager" />
      <span class="company-name">{{ 'NAV.COMPANY_NAME' | translate }}</span>
    </div>

    <!-- Hamburger Menu Button -->
    <button class="hamburger"
            (click)="toggleMenu()"
            [class.active]="isMenuOpen"
            [attr.aria-label]="isMenuOpen ? ('NAV.CLOSE_MENU' | translate) : ('NAV.OPEN_MENU' | translate)"
            [attr.aria-expanded]="isMenuOpen">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <!-- Inline Language Selector for Mobile -->
    <div class="mobile-language-selector">
      <div class="lang-toggle">
        <a href="/en" class="flag-option" [class.active]="currentLang === 'en'" (click)="switchLanguage('en'); $event.preventDefault()">
          <img src="assets/flags/gb.svg" alt="English" class="flag-icon" />
          <span>EN</span>
        </a>
        <span class="divider">|</span>
        <a href="/es" class="flag-option" [class.active]="currentLang === 'es'" (click)="switchLanguage('es'); $event.preventDefault()">
          <img src="assets/flags/es.svg" alt="Español" class="flag-icon" />
          <span>ES</span>
        </a>
      </div>
    </div>

    <!-- Nav Links -->
    <ul class="nav-links" [class.show-mobile]="isMenuOpen" [class.scrolled-nav]="isScrolled">
      <li>
        <a
          [routerLink]="getRoutePath('')"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{exact: true}"
          (click)="closeMenu()">
          {{ 'NAV.HOME' | translate }}
        </a>
      </li>
      <li>
        <a
          [routerLink]="getRoutePath('about-us')"
          routerLinkActive="active"
          (click)="closeMenu()">
          {{ 'NAV.ABOUT_US' | translate }}
        </a>
      </li>
      <li>
        <a
          [routerLink]="getRoutePath('products')"
          routerLinkActive="active"
          (click)="closeMenu()">
          {{ 'NAV.PRODUCTS' | translate }}
        </a>
      </li>
      <li>
        <a
          [routerLink]="getRoutePath('contact')"
          routerLinkActive="active"
          (click)="closeMenu()">
          {{ 'NAV.CONTACT' | translate }}
        </a>
      </li>

      <!-- Mobile-Only: Download Catalog Link (opens language selector modal) -->
      <li class="mobile-only">
        <a href="#catalog" (click)="openCatalogModal(); closeMenu(); $event.preventDefault()">
          <img src="assets/photos/pdf.png" alt="PDF Icon" class="download-icon" width="30" height="30" loading="lazy" decoding="async" />
          {{ 'NAV.DOWNLOAD_CATALOG' | translate }}
        </a>
      </li>
    </ul>

    <!-- Inline Desktop Language Selector -->
    <div class="desktop-language-selector">
      <div class="lang-toggle">
        <a href="/en" class="flag-option" [class.active]="currentLang === 'en'" (click)="switchLanguage('en'); $event.preventDefault()">
          <img src="assets/flags/gb.svg" alt="English" class="flag-icon" />
          <span>EN</span>
        </a>
        <span class="divider">|</span>
        <a href="/es" class="flag-option" [class.active]="currentLang === 'es'" (click)="switchLanguage('es'); $event.preventDefault()">
          <img src="assets/flags/es.svg" alt="Español" class="flag-icon" />
          <span>ES</span>
        </a>
      </div>
    </div>
  </div>
</nav>

<!-- Catalog Modal Overlay (placed outside the nav for proper centering) -->
<div class="catalog-modal-overlay" *ngIf="isCatalogModalOpen" (click)="closeCatalogModal()">
  <div class="catalog-modal" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="closeCatalogModal()">
      <i class="fas fa-times"></i>
    </button>
    <h3>{{ 'NAV.CATALOG_MODAL.TITLE' | translate }}</h3>
    <p>{{ 'NAV.CATALOG_MODAL.SUBTITLE' | translate }}</p>
    <div class="language-options">
      <button (click)="downloadCatalog('en')">
        <img src="assets/flags/gb.svg" alt="English" width="28" height="21" />
        {{ 'NAV.CATALOG_MODAL.ENGLISH' | translate }}
      </button>
      <button (click)="downloadCatalog('es')">
        <img src="assets/flags/es.svg" alt="Español" width="28" height="21" />
        {{ 'NAV.CATALOG_MODAL.SPANISH' | translate }}
      </button>
    </div>
  </div>
</div>
