<main class="home-container" role="main">
  <!-- Hero Section -->
  <section id="hero" class="hero-section" aria-label="Welcome to our concrete mixer solutions">
    <div class="hero-background">
      <ng-container *ngIf="heroBackgrounds[currentHeroBackground].type === 'image'">
        <img
          [src]="heroBackgrounds[currentHeroBackground].src"
          [alt]="heroBackgrounds[currentHeroBackground].alt"
          class="hero-bg-image">
      </ng-container>
      <ng-container *ngIf="heroBackgrounds[currentHeroBackground].type === 'video'">
        <video
          #heroVideo
          class="hero-bg-video"
          [poster]="heroBackgrounds[currentHeroBackground].poster"
          loop
          muted
          playsinline
          autoplay>
          <source [src]="heroBackgrounds[currentHeroBackground].src" type="video/mp4">
        </video>
      </ng-container>
      <div class="hero-overlay"></div>
    </div>

    <div class="hero-content">
      <div class="hero-text" @fadeIn>
        <h1>Engineered for Strength,<br>Built to Last</h1>
        <p>Professional-grade concrete mixers delivering unmatched reliability and performance for over two decades. Experience the power of precision engineering in every pour.</p>

        <div class="hero-cta" @slideIn>
          <button
            class="btn-primary"
            (click)="scrollToSection('products')"
            aria-label="Explore our product range">
            Explore Products
            <i class="fas fa-arrow-right" aria-hidden="true"></i>
          </button>

          <button
            class="btn-secondary"
            (click)="playDemoVideo()"
            aria-label="Watch product demonstration video">
            Watch Video
            <i class="fas fa-play" aria-hidden="true"></i>
          </button>

          <button
            class="btn-accent"
            (click)="scrollToSection('contact')"
            aria-label="Request a product quote">
            Request Quote
            <i class="fas fa-paper-plane" aria-hidden="true"></i>
          </button>
        </div>

        <div
          class="scroll-indicator"
          [class.hide]="!showScrollIndicator"
          @scrollIndicator
          aria-hidden="true">
          <span>Scroll to explore</span>
          <i class="fas fa-chevron-down"></i>
        </div>
      </div>

      <div class="hero-highlights"></div>
    </div>

    <button
      class="hero-background-toggle"
      (click)="toggleHeroBackground()"
      aria-label="Toggle background view">
      <i class="fas"
         [class.fa-image]="heroBackgrounds[currentHeroBackground].type === 'video'"
         [class.fa-video]="heroBackgrounds[currentHeroBackground].type === 'image'"
         aria-hidden="true"></i>
    </button>
  </section>

  <!-- Flag Carousel Section -->
  <section class="flag-carousel-section">
    <div class="delivery-note">
      Delivered to 30+ countries and counting â€¢ We ship worldwide!
    </div>
    <div class="flag-carousel-container">
      <div class="flag-carousel-track">
        <div class="flag-item" *ngFor="let flag of duplicatedFlags">
          <div class="flag-wrapper">
            <img [src]="'https://flagcdn.com/' + flag.code.toLowerCase() + '.svg'"
                 [alt]="flag.country + ' flag'"
                 loading="lazy">
          </div>
          <span class="country-name">{{flag.country}}</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Video Section -->
  <section id="video" class="video-section">
    <div class="section-container">
      <div class="video-wrapper">
        <video
          controls
          poster="/assets/photos/mixer-video-poster.jpg"
          preload="metadata"
          class="product-video">
          <source src="/assets/videos/homepage.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>
    </div>
  </section>

  <!-- Products Section -->
  <section id="products" class="products-section">
    <div class="products-background">
      <div class="geometric-pattern"></div>
      <div class="gradient-overlay"></div>
    </div>

    <div class="section-container">
      <header class="section-header" @fadeIn>
        <h2>Our Mixer Range</h2>
        <p>Choose the perfect mixer for your construction needs</p>
      </header>

      <div class="products-layout" @productFadeIn>
        <div class="products-grid">
          <!-- First Product Card -->
          <div class="product-card" [@productCardHover]="'idle'">
            <div class="product-image-wrapper">
              <img [src]="mixers[0].image" [alt]="mixers[0].name" class="product-image">
              <div class="image-overlay"></div>
            </div>
            <div class="product-content">
              <h3>{{mixers[0].name}}</h3>
              <p class="product-description">{{mixers[0].description}}</p>
              <div class="specs-grid">
                <div class="spec">
                  <span class="label">Capacity</span>
                  <span class="value">{{mixers[0].specs.capacity}}</span>
                </div>
                <div class="spec">
                  <span class="label">Power</span>
                  <span class="value">{{mixers[0].specs.enginePower}}</span>
                </div>
                <div class="spec">
                  <span class="label">Weight</span>
                  <span class="value">{{mixers[0].specs.weight}}</span>
                </div>
              </div>
              <ul class="feature-list">
                <li *ngFor="let feature of mixers[0].features">
                  <i class="fas fa-check"></i>
                  {{feature}}
                </li>
              </ul>
            </div>
          </div>

          <!-- Centered CTA Section -->
          <div class="products-cta" @ctaFadeIn>
            <div class="cta-content">
              <h3>Find Your Perfect Mixer</h3>
              <p>Take the next step in choosing your ideal concrete mixer</p>

              <div class="cta-buttons">
                <button
                  class="cta-button btn-primary"
                  (click)="requestQuote()"
                  aria-label="Request a quote">
                  <i class="fas fa-paper-plane"></i>
                  Request a Quote
                </button>

                <button
                  class="cta-button btn-secondary"
                  (click)="downloadCatalog()"
                  aria-label="Download product catalog">
                  <i class="fas fa-file-pdf"></i>
                  Download Catalog
                </button>

                <button
                  class="cta-button btn-accent"
                  (click)="navigateToComparison()"
                  aria-label="Compare mixer models">
                  <i class="fas fa-scale-balanced"></i>
                  Compare Models
                </button>
              </div>
            </div>
          </div>

          <!-- Second Product Card -->
          <div class="product-card" [@productCardHover]="'idle'">
            <div class="product-image-wrapper">
              <img [src]="mixers[1].image" [alt]="mixers[1].name" class="product-image">
              <div class="image-overlay"></div>
            </div>
            <div class="product-content">
              <h3>{{mixers[1].name}}</h3>
              <p class="product-description">{{mixers[1].description}}</p>
              <div class="specs-grid">
                <div class="spec">
                  <span class="label">Capacity</span>
                  <span class="value">{{mixers[1].specs.capacity}}</span>
                </div>
                <div class="spec">
                  <span class="label">Power</span>
                  <span class="value">{{mixers[1].specs.enginePower}}</span>
                </div>
                <div class="spec">
                  <span class="label">Weight</span>
                  <span class="value">{{mixers[1].specs.weight}}</span>
                </div>
              </div>
              <ul class="feature-list">
                <li *ngFor="let feature of mixers[1].features">
                  <i class="fas fa-check"></i>
                  {{feature}}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section id="features" class="features-section">
    <div class="section-container">
      <header class="section-header" @fadeIn>
        <h2>Advanced Features</h2>
        <p>Engineering excellence in every detail</p>
      </header>
      <div class="features-grid" @staggerFade>
        <div class="feature-card" *ngFor="let feature of features">
          <div class="feature-icon">
            <i [class]="feature.icon"></i>
          </div>
          <div class="feature-content">
            <h3>{{feature.title}}</h3>
            <p>{{feature.description}}</p>
            <div class="feature-highlight">
              <span>{{feature.highlight}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Company Section -->
  <section id="company" class="company-section">
    <div class="section-container">
      <div class="company-content" @fadeIn>
        <div class="company-text">
          <h2>Two Decades of Excellence</h2>
          <p>Building quality construction equipment since 2002</p>
          <div class="company-stats">
            <div class="stat">
              <span class="number">{{companyStats.yearsExperience}}</span>
              <span class="label">Years Experience</span>
            </div>
            <div class="stat">
              <span class="number">{{companyStats.mixersDelivered}}</span>
              <span class="label">Mixers Delivered</span>
            </div>
            <div class="stat">
              <span class="number">{{companyStats.countriesServed}}</span>
              <span class="label">Countries Served</span>
            </div>
          </div>
          <a href="/about" class="btn-secondary">
            Learn More About Us
            <i class="fas fa-arrow-right"></i>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq" class="faq-section">
    <div class="section-container">
      <header class="section-header" @fadeIn>
        <h2>Frequently Asked Questions</h2>
        <p>Get answers to common questions about our mixers</p>
      </header>
      <div class="faq-list">
        <div class="faq-item" *ngFor="let faq of faqs; let i = index" @fadeIn>
          <button class="faq-question" (click)="toggleFaq(i)"
            [class.active]="activeFaq === i">
            {{faq.question}}
            <i class="fas" [class.fa-chevron-down]="activeFaq !== i"
              [class.fa-chevron-up]="activeFaq === i"></i>
          </button>
          <div class="faq-answer" [class.active]="activeFaq === i">
            <p>{{faq.answer}}</p>
            <div class="faq-video" *ngIf="faq.videoUrl">
              <div class="faq-video-container">
                <video #demoVideo controls poster="{{faq.posterImage}}">
                  <source [src]="faq.videoUrl" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
              </div>
              <div class="faq-video-info">
                <div class="guide-title">
                  <div class="guide-icon">
                    <i class="fas fa-list-check"></i>
                  </div>
                  <h4>Operating Your Mixer: Step-by-Step Guide</h4>
                </div>
                <div class="operation-steps">
                  <div class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-content">
                      <div class="step-header">
                        <div class="step-icon">
                          <i class="fas fa-tools"></i>
                        </div>
                        <div class="step-title">Pre-Operation Check</div>
                      </div>
                      <div class="step-desc">Check engine oil level and mechanical parts</div>
                    </div>
                  </div>

                  <div class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-content">
                      <div class="step-header">
                        <div class="step-icon">
                          <i class="fas fa-power-off"></i>
                        </div>
                        <div class="step-title">Start Engine</div>
                      </div>
                      <div class="step-desc">Pull starter yo-yo until engine runs smoothly</div>
                    </div>
                  </div>

                  <div class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-content">
                      <div class="step-header">
                        <div class="step-icon">
                          <i class="fas fa-rotate"></i>
                        </div>
                        <div class="step-title">Control Position</div>
                      </div>
                      <div class="step-desc">Use foot pedal to adjust drum angle</div>
                    </div>
                  </div>

                  <div class="step-item">
                    <div class="step-number">4</div>
                    <div class="step-content">
                      <div class="step-header">
                        <div class="step-icon">
                          <i class="fas fa-fill-drip"></i>
                        </div>
                        <div class="step-title">Load Materials</div>
                      </div>
                      <div class="step-desc">Fill to max capacity (MT-370: 370L, MT-480: 480L)</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
