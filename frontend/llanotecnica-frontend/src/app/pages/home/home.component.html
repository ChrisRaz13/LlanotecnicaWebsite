<main class="home-container" role="main">
  <!-- Hero Section -->
  <section id="hero" class="hero-section" aria-label="Welcome to our concrete mixer solutions">
    <div class="hero-background">
      <!-- Desktop Video background - optimized loading -->
      <video
        #heroVideoDesktop
        class="hero-bg-video desktop-video"
        width="1920"
        height="1080"
        preload="metadata"
        loop
        muted="muted"
        defaultMuted
        playsinline
        autoplay>
        <source src="/assets/compressedvideos/herosectiondesktop.mp4" type="video/mp4">
      </video>

      <!-- Mobile Video background - ultra-optimized for performance -->
      <video
        #heroVideoMobile
        class="hero-bg-video mobile-video"
        width="780"
        height="1080"
        preload="none"
        loop
        muted="muted"
        defaultMuted
        playsinline
        webkit-playsinline
        autoplay>
        <source src="/assets/compressedvideos/herosectionmobile.mp4" type="video/mp4">
      </video>

      <div class="hero-overlay"></div>
    </div>

    <div class="hero-content">
      <div class="hero-text" @fadeIn>
        <h1>{{ 'HOME_PAGE.HERO.TITLE' | translate }}</h1>
        <p>{{ 'HOME_PAGE.HERO.DESCRIPTION' | translate }}</p>

        <div class="hero-cta" @slideIn>
          <button
            class="btn-primary"
            (click)="scrollToSection('products')"
            aria-label="Explore our product range">
            {{ 'HOME_PAGE.HERO.CTA_EXPLORE' | translate }}
            <i class="fas fa-arrow-right" aria-hidden="true"></i>
          </button>

          <button
            class="btn-secondary"
            (click)="playDemoVideo()"
            aria-label="Watch product demonstration video">
            {{ 'HOME_PAGE.HERO.CTA_VIDEO' | translate }}
            <i class="fas fa-play" aria-hidden="true"></i>
          </button>

          <button
            class="btn-accent flex items-center gap-2 px-4 py-2 rounded-lg transition-colors duration-200"
            (click)="requestQuote()"
            aria-label="Request a product quote">
            {{ 'HOME_PAGE.HERO.CTA_QUOTE' | translate }}
            <i class="fas fa-paper-plane" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </div>

    <div
      class="scroll-indicator"
      [class.hide]="!showScrollIndicator"
      @scrollIndicator
      aria-hidden="true">
      <span>{{ 'HOME_PAGE.HERO.SCROLL_INDICATOR' | translate }}</span>
      <i class="fas fa-chevron-down"></i>
    </div>
  </section>

  <!-- Flag Carousel Section -->
  <section class="flag-carousel-section">
    <div class="delivery-note">
      {{ 'HOME_PAGE.FLAG_CAROUSEL.DELIVERY_NOTE' | translate }}
    </div>
    <div class="flag-carousel-container">
      <div class="flag-carousel-track">
        <div class="flag-item" *ngFor="let flag of flags_for_display">
          <div class="flag-wrapper">
            <img [src]="'https://flagcdn.com/' + flag.code.toLowerCase() + '.svg'"
                 [alt]="flag.country + ' flag'"
                 width="48"
                 height="36"
                 loading="lazy"
                 decoding="async">
          </div>
          <span class="country-name">{{flag.country}}</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Video Section - Updated for portrait video with info sidebar -->
  <section id="video" class="video-section">
    <div class="section-container">
      <header class="section-header" @fadeIn>
        <div class="header-accent"></div>
        <h2>{{ 'HOME_PAGE.VIDEO_SECTION.TITLE' | translate }}</h2>
        <p>{{ 'HOME_PAGE.VIDEO_SECTION.SUBTITLE' | translate }}</p>
      </header>

      <div class="portrait-video-wrapper">
        <div class="video-container">
          <video
            #mainVideo
            controls
            preload="metadata"
            [poster]="currentVideoPoster"
            class="portrait-video">
            <source [src]="currentVideoSrc" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>

        <div class="video-info-sidebar" @videoInfoFadeIn>
          <div class="video-info-content">
            <h3>{{ videoInfoTitle }}</h3>
            <p>{{ videoInfoDescription }}</p>

            <div class="video-highlights" @highlightFadeIn>
              <div class="highlight-item" *ngFor="let highlight of videoHighlights">
                <i class="fas" [ngClass]="'fa-' + highlight.icon"></i>
                <span>{{ highlight.text }}</span>
              </div>
            </div>

            <div class="video-cta">
              <button class="btn-primary" (click)="requestConsultation()">
                {{ videoCTAText }}
                <i class="fas fa-arrow-right"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Our Mixer Range Section -->
  <section id="products" class="products-section">
    <div class="products-background">
      <div class="geometric-pattern"></div>
      <div class="gradient-overlay"></div>
    </div>

    <div class="section-container">
      <header class="section-header" @fadeIn>
        <div class="header-accent"></div>
        <h2>Our Mixer Range</h2>
        <p>Choose the perfect mixer for your construction needs</p>
      </header>

      <!-- Product Grid Layout -->
      <div class="product-display-grid" *ngIf="mixers && mixers.length > 0">
        <!-- First Mixer - MT-370 -->
        <div class="product-card" *ngIf="mixers[0]">
          <div class="product-image-container">
            <img [src]="mixers[0].image"
                 [alt]="mixers[0].name"
                 width="600"
                 height="400"
                 loading="lazy"
                 class="product-image">
          </div>
          <div class="product-content">
            <h3>{{ mixers[0].name }}</h3>
            <p class="product-tagline">The compact powerhouse for versatile projects</p>

            <div class="product-specs">
              <div class="spec-item">
                <div class="spec-icon"><i class="fas fa-ruler-combined"></i></div>
                <div class="spec-info">
                  <span class="spec-label">Capacity</span>
                  <span class="spec-value">{{ mixers[0].specs.capacity }}</span>
                </div>
              </div>
              <div class="spec-item">
                <div class="spec-icon"><i class="fas fa-bolt"></i></div>
                <div class="spec-info">
                  <span class="spec-label">Power</span>
                  <span class="spec-value">{{ mixers[0].specs.enginePower }}</span>
                </div>
              </div>
              <div class="spec-item">
                <div class="spec-icon"><i class="fas fa-weight-hanging"></i></div>
                <div class="spec-info">
                  <span class="spec-label">Weight</span>
                  <span class="spec-value">{{ mixers[0].specs.weight }}</span>
                </div>
              </div>
            </div>

            <div class="product-description">
              <p>{{ mixers[0].description }}</p>
            </div>

            <div class="product-features">
              <h4>Key Features</h4>
              <ul class="feature-list">
                <li *ngFor="let feature of mixers[0].features">
                  <i class="fas fa-check-circle"></i>
                  <span>{{ feature }}</span>
                </li>
              </ul>
            </div>

            <div class="product-actions">
              <button class="btn-primary" [routerLink]="['/products']">
                View Details
                <i class="fas fa-arrow-right"></i>
              </button>
              <button class="btn-secondary" (click)="requestQuote()">
                Request Quote
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Second Mixer - MT-480 -->
        <div class="product-card" *ngIf="mixers.length > 1">
          <div class="product-image-container">
            <img [src]="mixers[1].image"
                 [alt]="mixers[1].name"
                 width="600"
                 height="400"
                 loading="lazy"
                 class="product-image">
          </div>
          <div class="product-content">
            <h3>{{ mixers[1].name }}</h3>
            <p class="product-tagline">Maximum power for demanding projects</p>

            <div class="product-specs">
              <div class="spec-item">
                <div class="spec-icon"><i class="fas fa-ruler-combined"></i></div>
                <div class="spec-info">
                  <span class="spec-label">Capacity</span>
                  <span class="spec-value">{{ mixers[1].specs.capacity }}</span>
                </div>
              </div>
              <div class="spec-item">
                <div class="spec-icon"><i class="fas fa-bolt"></i></div>
                <div class="spec-info">
                  <span class="spec-label">Power</span>
                  <span class="spec-value">{{ mixers[1].specs.enginePower }}</span>
                </div>
              </div>
              <div class="spec-item">
                <div class="spec-icon"><i class="fas fa-weight-hanging"></i></div>
                <div class="spec-info">
                  <span class="spec-label">Weight</span>
                  <span class="spec-value">{{ mixers[1].specs.weight }}</span>
                </div>
              </div>
            </div>

            <div class="product-description">
              <p>{{ mixers[1].description }}</p>
            </div>

            <div class="product-features">
              <h4>Key Features</h4>
              <ul class="feature-list">
                <li *ngFor="let feature of mixers[1].features">
                  <i class="fas fa-check-circle"></i>
                  <span>{{ feature }}</span>
                </li>
              </ul>
            </div>

            <div class="product-actions">
              <button class="btn-primary" [routerLink]="['/products']">
                View Details
                <i class="fas fa-arrow-right"></i>
              </button>
              <button class="btn-secondary" (click)="requestQuote()">
                Request Quote
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Centered CTA Section -->
      <div class="products-cta">
        <div class="cta-content">
          <h3>Find Your Perfect Mixer</h3>
          <p>Take the next step in choosing your ideal concrete mixer</p>

          <div class="cta-buttons">
            <button
              class="cta-button btn-primary"
              (click)="requestQuote()"
              aria-label="Request a quote">
              <i class="fas fa-paper-plane"></i>
              Request a Quote
            </button>

            <button
              class="cta-button btn-secondary"
              (click)="openCatalogModal()"
              aria-label="Download product catalog">
              <i class="fas fa-file-pdf"></i>
              Download Catalog
            </button>

            <button
              class="cta-button btn-accent"
              (click)="scrollToComparison()"
              aria-label="Compare mixer models">
              <i class="fas fa-scale-balanced"></i>
              Compare Models
            </button>
          </div>
        </div>
      </div>

      <!-- Quick Comparison Table -->
      <div id="comparison" class="comparison-section">
        <h3 class="comparison-title">Quick Comparison</h3>
        <div class="comparison-table-container">
          <table class="comparison-table">
            <thead>
              <tr>
                <th>Specification</th>
                <th>MT-370</th>
                <th>MT-480</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Drum Capacity</td>
                <td class="table-center">370 L (13 cu. ft)</td>
                <td class="table-center">480 L (15 cu. ft)</td>
              </tr>
              <tr>
                <td>Mixing Capacity</td>
                <td class="table-center">1 Bag (360 L)</td>
                <td class="table-center">2 Bags (420 L)</td>
              </tr>
              <tr>
                <td>Drum Opening</td>
                <td class="table-center">18 in (450 mm)</td>
                <td class="table-center">19 in (460 mm)</td>
              </tr>
              <tr>
                <td>Drum Depth</td>
                <td class="table-center">32 in (800 mm)</td>
                <td class="table-center">41 in (1020 mm)</td>
              </tr>
              <tr>
                <td>Best Use Case</td>
                <td class="table-center">Small to Medium Projects</td>
                <td class="table-center">Large Commercial Projects</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Download Catalog Modal - Angular style -->
    <div class="modal-overlay" [class.active]="isModalOpen" (click)="onModalBackdropClick($event)">
      <div class="modal-container">
        <button class="modal-close" (click)="closeCatalogModal()">
          <i class="fas fa-times"></i>
        </button>

        <h3 class="modal-title">{{ 'HOME_PAGE.MODAL.TITLE' | translate }}</h3>
        <p class="modal-subtitle">{{ 'HOME_PAGE.MODAL.SUBTITLE' | translate }}</p>

        <div class="language-grid">
          <a
            href="/assets/photos/Catalog-Eng.pdf"
            download
            (click)="closeCatalogModal()"
            class="language-option"
          >
            <img src="https://flagcdn.com/w80/us.png"
                 alt="English"
                 width="80"
                 height="60"
                 loading="lazy"
                 class="language-flag" />
            <span class="language-label">{{ 'HOME_PAGE.MODAL.ENGLISH' | translate }}</span>
          </a>

          <a
            href="/assets/photos/Catalog-Esp.pdf"
            download
            (click)="closeCatalogModal()"
            class="language-option"
          >
            <img src="https://flagcdn.com/w80/es.png"
                 alt="Español"
                 width="80"
                 height="60"
                 loading="lazy"
                 class="language-flag" />
            <span class="language-label">{{ 'HOME_PAGE.MODAL.SPANISH' | translate }}</span>
          </a>
        </div>

        <div class="modal-footer">
          {{ 'HOME_PAGE.MODAL.FILE_INFO' | translate }}
        </div>
      </div>
    </div>
  </section>

  <!-- Advanced Features Section -->
  <section id="features" class="features-section">
    <div class="section-container">
      <header class="section-header" @fadeIn>
        <h2>Advanced Features</h2>
        <p>Engineering excellence in every detail</p>
      </header>
      <div class="features-grid" @staggerFade>
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fa-solid fa-shield"></i>
          </div>
          <div class="feature-content">
            <h3>Reinforced Drum Design</h3>
            <p>Heavy-duty steel construction with double-reinforced joints and wear-resistant coating.</p>
            <div class="feature-highlight">
              <span>50% increased lifespan</span>
            </div>
          </div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fa-solid fa-gears"></i>
          </div>
          <div class="feature-content">
            <h3>Protected Gear Mechanism</h3>
            <p>Sealed gearbox system with automatic lubrication and debris protection.</p>
            <div class="feature-highlight">
              <span>10,000+ operation hours</span>
            </div>
          </div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <i class="fa-solid fa-shield-halved"></i>
          </div>
          <div class="feature-content">
            <h3>Enhanced Safety Features</h3>
            <p>Multiple emergency stops, protective guards, and safety interlocks for operator protection.</p>
            <div class="feature-highlight">
              <span>Triple safety system</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Company Section -->
  <section id="company" class="company-section">
    <div class="company-background">
      <div class="geometric-pattern"></div>
      <div class="gradient-overlay"></div>
    </div>

    <div class="section-container">
      <div class="company-content" @fadeIn>
        <div class="text-center mb-12">
          <h2 class="company-title">Two Decades of Excellence</h2>
          <p class="company-subtitle">Building quality construction equipment since 2002</p>
        </div>

        <div class="company-stats-grid">
          <div class="stat-card" @statFadeIn>
            <div class="stat-icon">🏭</div>
            <div class="stat-number">20+</div>
            <div class="stat-label">Years Experience</div>
            <div class="stat-detail">Industry leadership since 2002</div>
          </div>
          <div class="stat-card" @statFadeIn>
            <div class="stat-icon">🚛</div>
            <div class="stat-number">5000+</div>
            <div class="stat-label">Mixers Delivered</div>
            <div class="stat-detail">Serving global construction needs</div>
          </div>
          <div class="stat-card" @statFadeIn>
            <div class="stat-icon">🌍</div>
            <div class="stat-number">30+</div>
            <div class="stat-label">Countries Served</div>
            <div class="stat-detail">Global presence and support</div>
          </div>
        </div>

        <div class="company-cta">
          <a [routerLink]="['/about-us']" class="btn-secondary">
            Learn More About Us
            <i class="fas fa-arrow-right"></i>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq" class="faq-section">
    <div class="section-container">
      <header class="section-header" @fadeIn>
        <h2>Frequently Asked Questions</h2>
        <p>Get answers to common questions about our mixers</p>
      </header>
      <div class="faq-list">
        <div class="faq-item" @fadeIn>
          <button class="faq-question" (click)="toggleFaq(0)"
            [class.active]="activeFaq === 0">
            How do I operate the MT-370 and MT-480 mixers?
            <i class="fas" [class.fa-chevron-down]="activeFaq !== 0"
              [class.fa-chevron-up]="activeFaq === 0"></i>
          </button>
          <div class="faq-answer" [class.active]="activeFaq === 0">
            <p>Watch our detailed demonstration video below:</p>
            <div class="faq-video">
              <div class="faq-video-container">
                <video #demoVideo
                       controls
                       width="640"
                       height="360"
                       preload="metadata">
                  <source src="/assets/compressedvideos/instruction.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
              </div>
              <div class="faq-video-info">
                <div class="guide-title">
                  <div class="guide-icon">
                    <i class="fas fa-list-check"></i>
                  </div>
                  <h4>Operation Steps</h4>
                </div>
                <div class="operation-steps">
                  <div class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-content">
                      <div class="step-header">
                        <div class="step-icon">
                          <i class="fas fa-tools"></i>
                        </div>
                        <div class="step-title">Pre-Operation Check</div>
                      </div>
                      <div class="step-desc">Inspect all components and ensure proper setup</div>
                    </div>
                  </div>

                  <div class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-content">
                      <div class="step-header">
                        <div class="step-icon">
                          <i class="fas fa-power-off"></i>
                        </div>
                        <div class="step-title">Start Engine</div>
                      </div>
                      <div class="step-desc">Follow proper engine startup procedures</div>
                    </div>
                  </div>

                  <div class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-content">
                      <div class="step-header">
                        <div class="step-icon">
                          <i class="fas fa-rotate"></i>
                        </div>
                        <div class="step-title">Control Position</div>
                      </div>
                      <div class="step-desc">Set drum to proper mixing position</div>
                    </div>
                  </div>

                  <div class="step-item">
                    <div class="step-number">4</div>
                    <div class="step-content">
                      <div class="step-header">
                        <div class="step-icon">
                          <i class="fas fa-fill-drip"></i>
                        </div>
                        <div class="step-title">Load Materials</div>
                      </div>
                      <div class="step-desc">Add cement, aggregate, and water as needed</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="faq-item" @fadeIn>
          <button class="faq-question" (click)="toggleFaq(1)"
            [class.active]="activeFaq === 1">
            What maintenance is required?
            <i class="fas" [class.fa-chevron-down]="activeFaq !== 1"
              [class.fa-chevron-up]="activeFaq === 1"></i>
          </button>
          <div class="faq-answer" [class.active]="activeFaq === 1">
            <p>Regular maintenance includes daily cleaning, weekly lubrication checks, and monthly mechanical inspections.</p>
          </div>
        </div>
        <div class="faq-item" @fadeIn>
          <button class="faq-question" (click)="toggleFaq(2)"
            [class.active]="activeFaq === 2">
            Which mixer is right for my project?
            <i class="fas" [class.fa-chevron-down]="activeFaq !== 2"
              [class.fa-chevron-up]="activeFaq === 2"></i>
          </button>
          <div class="faq-answer" [class.active]="activeFaq === 2">
            <p>The MT-370 is ideal for residential and small commercial projects, while the MT-480 is designed for larger commercial applications.</p>
          </div>
        </div>
        <div class="faq-item" @fadeIn>
          <button class="faq-question" (click)="toggleFaq(3)"
            [class.active]="activeFaq === 3">
            What warranty do you offer?
            <i class="fas" [class.fa-chevron-down]="activeFaq !== 3"
              [class.fa-chevron-up]="activeFaq === 3"></i>
          </button>
          <div class="faq-answer" [class.active]="activeFaq === 3">
            <p>Our concrete mixers are covered by a 6-month warranty against any manufacturing defects. For more information, please contact technical support.</p>
          </div>
        </div>
        <div class="faq-item" @fadeIn>
          <button class="faq-question" (click)="toggleFaq(4)"
            [class.active]="activeFaq === 4">
            Are spare parts readily available?
            <i class="fas" [class.fa-chevron-down]="activeFaq !== 4"
              [class.fa-chevron-up]="activeFaq === 4"></i>
          </button>
          <div class="faq-answer" [class.active]="activeFaq === 4">
            <p>Yes, we maintain a complete inventory of spare parts with delivery on request.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
